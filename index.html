<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Soalat_Test_School</title>

<!-- Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„Ø§Øª -->
<script src="./questions.js"></script>

<style>
body{
  font-family:tahoma;
  background:#f4f6f8;
  text-align:center;
}
.box{
  background:#fff;
  padding:20px;
  margin:20px auto;
  width:90%;
  max-width:500px;
  border-radius:10px;
}
button{
  padding:10px 20px;
  font-size:16px;
  margin:6px;
}
</style>
</head>

<body>

<!-- ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹ -->
<div class="box" id="startBox">
  <h2>Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†</h2>
  <p>Ù…ÙˆØ¶ÙˆØ¹: ØªØ§Ø±ÛŒØ® Ùˆ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒ Ø§ÛŒØ±Ø§Ù†</p>
  <input id="name" placeholder="Ù†Ø§Ù… Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡">
  <br><br>
  <button onclick="startExam()">Ø´Ø±ÙˆØ¹</button>
</div>

<!-- ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ† -->
<div class="box" id="examBox" style="display:none">
  <h3 id="q"></h3>
  <div id="opts"></div>
</div>

<!-- ØµÙØ­Ù‡ Ù¾Ø§ÛŒØ§Ù† -->
<div class="box" id="endBox" style="display:none">
  <h2 id="result"></h2>
  <button onclick="location.reload()">Ø®Ø±ÙˆØ¬</button>
  <p>Ø·Ø±Ø§Ø­: aminsystem2000</p>
</div>

<!-- ğŸ”´ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø§ÛŒÙ†Ø¬Ø§Ø³Øª (Ø®ÛŒÙ„ÛŒ Ù…Ù‡Ù…) -->
<script>
let qs = [];
let i = 0;
let score = 0;

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

function startExam(){
  // ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¯Ú©Ù…Ù‡
  alert("startExam Ø§Ø¬Ø±Ø§ Ø´Ø¯");

  const n = document.getElementById("name").value.trim();
  if(!n){
    alert("Ù†Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");
    return;
  }

  qs = shuffle(HISTORY).slice(0,4)
        .concat(shuffle(GEOGRAPHY).slice(0,4))
        .concat(shuffle(MIXED).slice(0,2));

  qs = shuffle(qs);

  document.getElementById("startBox").style.display="none";
  document.getElementById("examBox").style.display="block";

  showQ();
}

function showQ(){
  if(i >= qs.length){
    finish();
    return;
  }

  document.getElementById("q").innerText = qs[i].q;

  const options = shuffle([...qs[i].a]);
  document.getElementById("opts").innerHTML =
    options.map(o =>
      <button onclick="answer('${o}')">${o}</button>
    ).join("<br>");
}

function answer(x){
  if(x === qs[i].c) score++;
  i++;
  showQ();
}

function finish(){
  document.getElementById("examBox").style.display="none";
  document.getElementById("endBox").style.display="block";
  document.getElementById("result").innerText =
    "Ù†Ù…Ø±Ù‡ Ø´Ù…Ø§: " + score + " Ø§Ø² 10";
}
</script>

</body>
</html>
